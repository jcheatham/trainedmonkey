<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Monkey Wrench 2: Trained Monkey</title>
        <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
        <script src="//cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
    </head>
    <body>

    <script src="src/main.js"></script>
    <script src="src/car.js"></script>
    <script src="src/background.js"></script>
    <script src="src/monkey.js"></script>
    <script src="src/items.js"></script>

    <script src="src/activationlever.js"></script>
    <script src="src/birdnest.js"></script>
    <script src="src/cat.js"></script>
    <script src="src/boiler.js"></script>
    <script src="src/fishbowl.js"></script>
    <script src="src/gumballmachine.js"></script>
    <script src="src/gumball.js"></script>
    <script src="src/hatrack.js"></script>
    <script src="src/key.js"></script>
    <script src="src/owl.js"></script>
    <script src="src/quarter.js"></script>
    <script src="src/steamvalve.js"></script>
    <script src="src/steamswitch.js"></script>
    <script src="src/wig.js"></script>
    <script src="src/wrench.js"></script>
    <script src="src/portal1.js"></script>
    <script src="src/door.js"></script>
    <script src="src/cage.js"></script>

    <script type="text/javascript">

    // var debug = true;
    var debug = false;


    var phaser = {};

    window.onload = function() {

        function preload () {
            game.loadAssets();
            background.loadAssets();
        }

        function create () {
            game.init();
        }

        function update() {
            game.update();
            // background.update();
        }

        function render() {
            if(debug) {
                phaser.debug.cameraInfo(phaser.camera, 32, 32);
                phaser.debug.spriteCoords(game.monkey.sprite, 32, 500);
                phaser.debug.text(game.monkey.velocityX.toString(), 32, 300);

                if (game.monkey.collisionRect) { phaser.debug.geom(game.monkey.collisionRect); }
                _.each(items, function(item) { if (item.collisionRect) { phaser.debug.geom(item.collisionRect); } });
            }
        }

        var main = { 
            preload: preload, 
            create: create, 
            update: update, 
            render: render 
        };

        phaser = new Phaser.Game(1000, 562, Phaser.AUTO, '', main, false, false);

        phaser.state.add('main', main);
        console.log(phaser);
        phaser.state.start('main');

    };



    </script>

    </body>
</html>
